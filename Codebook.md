---
title: "Getting and Cleaning Data Course Project"
author: "gavanderlinden"
date: "25-10-2015"
output:
  html_document:
    keep_md: yes
---

## Project Description
The purpose of this project is to create a tidy data set extracted from the
"Human Activity Recognition Using Smartphones Data Set".

The new data set only contains the mean and standard deviation of the measurements from the original dataset.

## Problem Summary
The original data set (Human Activity Recognition Using Smartphones Data Set) is split up in separate files. If we want to analyze only the mean and standard deviation for the different activities it will be helpful to have that data in a more compressed form.

For this we need the average mean and standard deviation for each activity and subject recorded in the experiment.

###Collection of the raw data
The experiments have been carried out with a group of 30 volunteers within an age bracket of 19-48 years. Each person performed six activities (WALKING, WALKING_UPSTAIRS, WALKING_DOWNSTAIRS, SITTING, STANDING, LAYING) wearing a smartphone (Samsung Galaxy S II) on the waist. Using its embedded accelerometer and gyroscope, we captured 3-axial linear acceleration and 3-axial angular velocity at a constant rate of 50Hz. The experiments have been video-recorded to label the data manually. The obtained dataset has been randomly partitioned into two sets, where 70% of the volunteers was selected for generating the training data and 30% the test data. 

The sensor signals (accelerometer and gyroscope) were pre-processed by applying noise filters and then sampled in fixed-width sliding windows of 2.56 sec and 50% overlap (128 readings/window). The sensor acceleration signal, which has gravitational and body motion components, was separated using a Butterworth low-pass filter into body acceleration and gravity. The gravitational force is assumed to have only low frequency components, therefore a filter with 0.3 Hz cutoff frequency was used. From each window, a vector of features was obtained by calculating variables from the time and frequency domain.

###Notes on the original (raw) data 
For each record in the dataset it is provided: 
- Triaxial acceleration from the accelerometer (total acceleration) and the estimated body acceleration. 
- Triaxial Angular velocity from the gyroscope. 
- A 561-feature vector with time and frequency domain variables. 
- Its activity label. 
- An identifier of the subject who carried out the experiment.

##Creating the tidy datafile
1. Read the following files as tables: X_train.txt, y_train.txt, subject_train.txt, x_test.txt, y_test.txt, subject_test.txt.
2. Combine the 3 train files with cbind so that subject is the first column and activity the last.
3. Combine the 3 test files with cbind in the same way as the training files
4. Combine both combined files with rbind
5. Read features.txt as a table
6. Set first column to "subject" and last column to "activity" and all other columns to to the names loaded from features.txt
7. Extract all columns where mean() or std() is in the column name plus the subject and activity columns.
8. Read activity_labels.txt as a table
9. Replace all numeric indicators in the activity column with the corresponding activity lables
10. Group the data by subject and activity
11. Calculate the means for all grouped columns
12. Save the data frame as a table to a file: "HARUS_Mean_Std_Only.txt"

###Guide to create the tidy data file
1. Step 1 - download the raw data from the following link: https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip
2. Step 2 - unzip the raw data in the same folder as the repository
3. Step 3 - run_analysis.R (R -f run_analysis.R)

## Summary of the variables in the HARUS_Mean_Std_Only.txt file
 - The file has a header
 - The data set has 180 rows and 68 columns
 - The first column contains a subject id
 - The second column contains an activity
 - All other columns contain means from measurements for a specific movement or rotation

### Description of the variables
1. subject                    : int  1 1 1 1 1 1 2 2 2 2 ...
2. activity                   : Factor w/ 6 levels "LAYING","SITTING",..: 1 2 3 4 5 6 1 2 3 4 ...
3. tBodyAcc.mean...X          : num  0.222 0.261 0.279 0.277 0.289 ...
4. tBodyAcc.mean...Y          : num  -0.04051 -0.00131 -0.01614 -0.01738 -0.00992 ...
5. tBodyAcc.mean...Z          : num  -0.113 -0.105 -0.111 -0.111 -0.108 ...
6. tBodyAcc.std...X           : num  -0.928 -0.977 -0.996 -0.284 0.03 ...
7. tBodyAcc.std...Y           : num  -0.8368 -0.9226 -0.9732 0.1145 -0.0319 ...
8. tBodyAcc.std...Z           : num  -0.826 -0.94 -0.98 -0.26 -0.23 ...
9. tGravityAcc.mean...X       : num  -0.249 0.832 0.943 0.935 0.932 ...
10. tGravityAcc.mean...Y       : num  0.706 0.204 -0.273 -0.282 -0.267 ...
11. tGravityAcc.mean...Z       : num  0.4458 0.332 0.0135 -0.0681 -0.0621 ...
12. tGravityAcc.std...X        : num  -0.897 -0.968 -0.994 -0.977 -0.951 ...
13. tGravityAcc.std...Y        : num  -0.908 -0.936 -0.981 -0.971 -0.937 ...
14. tGravityAcc.std...Z        : num  -0.852 -0.949 -0.976 -0.948 -0.896 ...
15. tBodyAccJerk.mean...X      : num  0.0811 0.0775 0.0754 0.074 0.0542 ...
16. tBodyAccJerk.mean...Y      : num  0.003838 -0.000619 0.007976 0.028272 0.02965 ...
17. tBodyAccJerk.mean...Z      : num  0.01083 -0.00337 -0.00369 -0.00417 -0.01097 ...
18. tBodyAccJerk.std...X       : num  -0.9585 -0.9864 -0.9946 -0.1136 -0.0123 ...
19. tBodyAccJerk.std...Y       : num  -0.924 -0.981 -0.986 0.067 -0.102 ...
20. tBodyAccJerk.std...Z       : num  -0.955 -0.988 -0.992 -0.503 -0.346 ...
21. tBodyGyro.mean...X         : num  -0.0166 -0.0454 -0.024 -0.0418 -0.0351 ...
22. tBodyGyro.mean...Y         : num  -0.0645 -0.0919 -0.0594 -0.0695 -0.0909 ...
23. tBodyGyro.mean...Z         : num  0.1487 0.0629 0.0748 0.0849 0.0901 ...
24. tBodyGyro.std...X          : num  -0.874 -0.977 -0.987 -0.474 -0.458 ...
25. tBodyGyro.std...Y          : num  -0.9511 -0.9665 -0.9877 -0.0546 -0.1263 ...
26. tBodyGyro.std...Z          : num  -0.908 -0.941 -0.981 -0.344 -0.125 ...
27. tBodyGyroJerk.mean...X     : num  -0.1073 -0.0937 -0.0996 -0.09 -0.074 ...
28. tBodyGyroJerk.mean...Y     : num  -0.0415 -0.0402 -0.0441 -0.0398 -0.044 ...
29. tBodyGyroJerk.mean...Z     : num  -0.0741 -0.0467 -0.049 -0.0461 -0.027 ...
30. tBodyGyroJerk.std...X      : num  -0.919 -0.992 -0.993 -0.207 -0.487 ...
31. tBodyGyroJerk.std...Y      : num  -0.968 -0.99 -0.995 -0.304 -0.239 ...
32. tBodyGyroJerk.std...Z      : num  -0.958 -0.988 -0.992 -0.404 -0.269 ...
33. tBodyAccMag.mean..         : num  -0.8419 -0.9485 -0.9843 -0.137 0.0272 ...
34. tBodyAccMag.std..          : num  -0.7951 -0.9271 -0.9819 -0.2197 0.0199 ...
35. tGravityAccMag.mean..      : num  -0.8419 -0.9485 -0.9843 -0.137 0.0272 ...
36. tGravityAccMag.std..       : num  -0.7951 -0.9271 -0.9819 -0.2197 0.0199 ...
37. tBodyAccJerkMag.mean..     : num  -0.9544 -0.9874 -0.9924 -0.1414 -0.0894 ...
38. tBodyAccJerkMag.std..      : num  -0.9282 -0.9841 -0.9931 -0.0745 -0.0258 ...
39. tBodyGyroMag.mean..        : num  -0.8748 -0.9309 -0.9765 -0.161 -0.0757 ...
40. tBodyGyroMag.std..         : num  -0.819 -0.935 -0.979 -0.187 -0.226 ...
41. tBodyGyroJerkMag.mean..    : num  -0.963 -0.992 -0.995 -0.299 -0.295 ...
42. tBodyGyroJerkMag.std..     : num  -0.936 -0.988 -0.995 -0.325 -0.307 ...
43. fBodyAcc.mean...X          : num  -0.9391 -0.9796 -0.9952 -0.2028 0.0382 ...
44. fBodyAcc.mean...Y          : num  -0.86707 -0.94408 -0.97707 0.08971 0.00155 ...
45. fBodyAcc.mean...Z          : num  -0.883 -0.959 -0.985 -0.332 -0.226 ...
46. fBodyAcc.std...X           : num  -0.9244 -0.9764 -0.996 -0.3191 0.0243 ...
47. fBodyAcc.std...Y           : num  -0.834 -0.917 -0.972 0.056 -0.113 ...
48. fBodyAcc.std...Z           : num  -0.813 -0.934 -0.978 -0.28 -0.298 ...
49. fBodyAccJerk.mean...X      : num  -0.9571 -0.9866 -0.9946 -0.1705 -0.0277 ...
50. fBodyAccJerk.mean...Y      : num  -0.9225 -0.9816 -0.9854 -0.0352 -0.1287 ...
51. fBodyAccJerk.mean...Z      : num  -0.948 -0.986 -0.991 -0.469 -0.288 ...
52. fBodyAccJerk.std...X       : num  -0.9642 -0.9875 -0.9951 -0.1336 -0.0863 ...
53. fBodyAccJerk.std...Y       : num  -0.932 -0.983 -0.987 0.107 -0.135 ...
54. fBodyAccJerk.std...Z       : num  -0.961 -0.988 -0.992 -0.535 -0.402 ...
55. fBodyGyro.mean...X         : num  -0.85 -0.976 -0.986 -0.339 -0.352 ...
56. fBodyGyro.mean...Y         : num  -0.9522 -0.9758 -0.989 -0.1031 -0.0557 ...
57. fBodyGyro.mean...Z         : num  -0.9093 -0.9513 -0.9808 -0.2559 -0.0319 ...
58. fBodyGyro.std...X          : num  -0.882 -0.978 -0.987 -0.517 -0.495 ...
59. fBodyGyro.std...Y          : num  -0.9512 -0.9623 -0.9871 -0.0335 -0.1814 ...
60. fBodyGyro.std...Z          : num  -0.917 -0.944 -0.982 -0.437 -0.238 ...
61. fBodyAccMag.mean..         : num  -0.8618 -0.9478 -0.9854 -0.1286 0.0966 ...
62. fBodyAccMag.std..          : num  -0.798 -0.928 -0.982 -0.398 -0.187 ...
63. fBodyBodyAccJerkMag.mean.. : num  -0.9333 -0.9853 -0.9925 -0.0571 0.0262 ...
64. fBodyBodyAccJerkMag.std..  : num  -0.922 -0.982 -0.993 -0.103 -0.104 ...
65. fBodyBodyGyroMag.mean..    : num  -0.862 -0.958 -0.985 -0.199 -0.186 ...
66. fBodyBodyGyroMag.std..     : num  -0.824 -0.932 -0.978 -0.321 -0.398 ...
67. fBodyBodyGyroJerkMag.mean..: num  -0.942 -0.99 -0.995 -0.319 -0.282 ...
68. fBodyBodyGyroJerkMag.std.. : num  -0.933 -0.987 -0.995 -0.382 -0.392 ...

##Sources
1. http://archive.ics.uci.edu/ml/datasets/Human+Activity+Recognition+Using+Smartphones
2. https://gist.github.com/JorisSchut/dbc1fc0402f28cad9b41